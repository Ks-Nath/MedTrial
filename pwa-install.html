<script>
let deferredPrompt;

// Capture the install event
window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();  // Prevent automatic prompt
    deferredPrompt = e;

    // Add a button dynamically
    const btn = document.createElement('button');
    btn.innerText = 'ðŸ“² Install MedSuite';
    btn.style.position = 'fixed';
    btn.style.bottom = '20px';
    btn.style.right = '20px';
    btn.style.padding = '12px 20px';
    btn.style.backgroundColor = '#0a9396';
    btn.style.color = '#fff';
    btn.style.border = 'none';
    btn.style.borderRadius = '8px';
    btn.style.cursor = 'pointer';
    btn.style.zIndex = 9999;

    document.body.appendChild(btn);

    btn.addEventListener('click', async () => {
        if (!deferredPrompt) return;
        deferredPrompt.prompt();  // Browser install prompt
        const choice = await deferredPrompt.userChoice;
        console.log('User choice:', choice.outcome);
        deferredPrompt = null;
        btn.style.display = 'none';  // Hide button after install
    });
});
</script>
